server {
   listen 80;
   server_name localhost;
 
   root /usr/share/nginx/html;
   index index.html;
 
   # Add proper headers
   add_header X-Content-Type-Options nosniff;
   add_header X-Frame-Options DENY;
   add_header X-XSS-Protection "1; mode=block";
 
   # React router için gerekli
   location / {
     try_files $uri $uri/ /index.html;
     add_header Cache-Control "no-cache, no-store, must-revalidate";
   }
 
   # Static dosyalar için
   location /static/ {
     expires 1y;
     add_header Cache-Control "public, no-transform";
     add_header X-Content-Type-Options nosniff;
     try_files $uri =404;
   }

   # Images için özel konfigürasyon
   location ~* \.(jpg|jpeg|png|gif|ico|svg)$ {
     expires 30d;
     add_header Cache-Control "public, no-transform";
     try_files $uri =404;
     tcp_nodelay off;
     tcp_nopush on;
     sendfile on;
     sendfile_max_chunk 1m;
     aio on;
     directio 512k;
     directio_alignment 512;
   }
 
   # API istekleri için
   location /api/ {
     proxy_pass http://localhost:8080/;
     proxy_http_version 1.1;
     proxy_set_header Upgrade $http_upgrade;
     proxy_set_header Connection 'upgrade';
     proxy_set_header Host $host;
     proxy_cache_bypass $http_upgrade;
     
     # Buffer settings
     proxy_buffer_size 128k;
     proxy_buffers 4 256k;
     proxy_busy_buffers_size 256k;
     
     # Timeout settings
     proxy_connect_timeout 300;
     proxy_send_timeout 300;
     proxy_read_timeout 300;
   }
 
   # 404 hataları için
   error_page 404 /index.html;
   
   # Increase client body size
   client_max_body_size 50M;
}